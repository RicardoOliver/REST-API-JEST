# ğŸš€ API REST com AutenticaÃ§Ã£o JWT, Testes com Jest, Docker

Este projeto Ã© uma API REST simples construÃ­da com **Express.js**, que possui autenticaÃ§Ã£o via **JWT**, testes automatizados com **Jest + Supertest**, e suporte a **Docker** para execuÃ§Ã£o em containers.

---

## ğŸ“ Estrutura do Projeto

```
.
â”œâ”€â”€ app.js                # CÃ³digo principal da API Express
â”œâ”€â”€ server.js             # Inicializa o servidor
â”œâ”€â”€ auth.test.js          # Testes de autenticaÃ§Ã£o com Jest e Supertest
â”œâ”€â”€ Dockerfile            # Imagem do container
â”œâ”€â”€ docker-compose.yml    # OrquestraÃ§Ã£o Docker
â”œâ”€â”€ package.json
â””â”€â”€ README.md             # Este arquivo
```

---

## ğŸ”§ Tecnologias Utilizadas

- Node.js
- Express.js
- JWT (`jsonwebtoken`)
- Jest
- Supertest
- Docker + Docker Compose

---

## âœ… PrÃ©-requisitos

- [Node.js](https://nodejs.org/)
- [Docker](https://www.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)

---

## ğŸ› ï¸ InstalaÃ§Ã£o e ConfiguraÃ§Ã£o

### 1. Clonar o projeto

```bash
git clone https://github.com/RicardoOliver/REST-API-JEST.git
cd REST-API-JEST
```

### 2. Instalar dependÃªncias

```bash
npm install
```

### 3. Rodar a API localmente

```bash
node server.js
```

A API estarÃ¡ disponÃ­vel em `http://localhost:9000`.

---

## ğŸ§ª Rodando os testes com Jest

```bash
npm test
```

Os testes estÃ£o localizados em `auth.test.js`.

---

## ğŸ³ Usando Docker

### 1. Build da imagem

```bash
docker build -t api_rest_jest .
```

### 2. Rodar com Docker Compose

```bash
docker-compose up
```

A API serÃ¡ acessÃ­vel em `http://localhost:9000`.

> âš ï¸ Se estiver usando o Portainer ou outra aplicaÃ§Ã£o na porta 9000, altere a porta no `docker-compose.yml` para evitar conflito.

---

## ğŸ” AutenticaÃ§Ã£o JWT

### Rota de Login

```http
POST /login
Content-Type: application/json

{
  "username": "admin",
  "password": "1234"
}
```

Resposta:
```json
{
  "token": "seu-token-jwt"
}
```

### Rota protegida

```http
GET /dashboard
Authorization: Bearer <token>
```

---

## ğŸ§ª Exemplo de Teste com Jest + Supertest (`auth.test.js`)

```js
const request = require('supertest');
const app = require('./app');

describe('AutenticaÃ§Ã£o', () => {
  it('deve retornar um token vÃ¡lido com credenciais corretas', async () => {
    const res = await request(app)
      .post('/login')
      .send({ username: 'admin', password: '1234' });

    expect(res.statusCode).toEqual(200);
    expect(res.body).toHaveProperty('token');
  });

  it('deve negar acesso com token invÃ¡lido', async () => {
    const res = await request(app)
      .get('/dashboard')
      .set('Authorization', 'Bearer token_invalido');

    expect(res.statusCode).toEqual(401);
  });
});
```

---

## ğŸ Problemas comuns

- **Erro 403 no push com GitHub:** Use um **Personal Access Token** em vez da senha. Veja [essa explicaÃ§Ã£o](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token).

- **Conflito com porta 9000:** Altere a porta no `docker-compose.yml` se jÃ¡ estiver em uso.

---

## ğŸ“œ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a MIT.